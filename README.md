# Proper Physical Education

Проект по разработке программно-аппаратного комплекса для контроля правильности выполнения лечебной физической культуры с использованием компьютерного зрения и электромиографии.

---

##  Описание проекта

Система предназначена для мониторинга правильности выполнения упражнений лечебной физкультуры с помощью двух технологий:

1. **Компьютерное зрение** – отслеживает позу пользователя и строит цифровой скелет.
2. **Электромиография (ЭМГ)** – измеряет электрическую активность мышц.

Данные сравниваются с эталонными упражнениями, система даёт рекомендации в реальном времени и формирует отчёты о прогрессе.

---

##  Основные компоненты

### 1. Система компьютерного зрения
- **Цифровой скелет**: Строится с помощью MediaPipe на основе изображения с камеры.
- **Определение позы**: Определяются ключевые точки тела (33 точки в 3D).
- **Расчёт углов суставов**: На основе координат точек вычисляются углы в плечах, локтях, коленях и других суставах.
- **Определение позы**: Система распознаёт стандартные позы (например, T-поза, "руки по швам").

## 2. Система ЭМГ (электромиографии)

- **Датчики**: 4 беспроводных ЭМГ-датчика (по 2 на каждую руку).
- **Микроконтроллер**: ESP32-C3 для сбора и отправки данных.
- **Фильтрация сигнала**: Используется экспоненциальное скользящее среднее (EMA) для сглаживания данных.

## 3. Калибратор ЭМГ

Проводит калибровку датчиков для индивидуальной настройки под каждого пользователя.

### Процесс калибровки:

#### Этап 1: Запись базового уровня
- **Длительность**: 5 секунд
- **Состояние**: Рука полностью расслаблена
- **Что записывается**: Уровень мышечной активности в покое

#### Этап 2: Запись пиковой активности
- **Длительность**: 5 секунд
- **Состояние**: Рука максимально напряжена
- **Что записывается**: Максимальный уровень мышечной активности

#### Этап 3: Расчёт рабочих зон

На основе записанных данных система определяет три рабочие зоны:

**Рабочие зоны напряжения:**

Зелёная зона занимает первые 15% диапазона — это область слишком низкой активности, когда мышца недостаточно напряжена. Система рекомендует в этом случае "немного напрячься".

Жёлтая зона составляет средние 70% диапазона — это оптимальная рабочая зона, где напряжение мышц находится в правильных пределах. Когда активность в этой зоне, система подтверждает правильность выполнения упражнения.

Красная зона охватывает последние 15% диапазона — это область перенапряжения, когда мышца работает слишком интенсивно. В этом случае система советует "расслабиться".

Во время тренировки система постоянно сравнивает текущую мышечную активность с этими калибровочными зонами и даёт пользователю понятную цветовую обратную связь в реальном времени.

## 4. Экспертная система анализа упражнений

Экспертная система является ядром всего проекта. Она объединяет данные от двух подсистем — компьютерного зрения и ЭМГ-датчиков — чтобы давать комплексную оценку правильности выполнения упражнений.

### Как это работает:

Система получает данные одновременно от камер и ЭМГ-датчиков. От системы компьютерного зрения она получает углы в суставах: плечах, локтях, коленях и других. От ЭМГ-системы поступает информация об уровне мышечной активности.

### Сравнение с эталоном:

Каждое упражнение в системе имеет эталонное описание, которое хранится в базе знаний. Это описание содержит:
- Правильные углы в суставах на разных фазах упражнения
- Оптимальные уровни мышечной активности
- Допустимые отклонения от нормы

Экспертная система постоянно сравнивает текущие показатели пользователя с этими эталонными значениями.

### Выявление отклонений:

Когда система обнаруживает отклонения, она анализирует их характер:
- Если углы в суставах неправильные, но мышечная активность нормальная → проблема в технике выполнения
- Если углы правильные, но мышечная активность низкая → недостаточное усилие
- Если углы и активность отклоняются вместе → возможно, упражнение выполняется неправильно полностью

### Генерация рекомендаций:

На основе анализа система генерирует конкретные рекомендации. Например:
- "Поднимите левую руку на 15 градусов выше" — если угол в плече недостаточный
- "Напрягите бицепс сильнее" — если ЭМГ показывает недостаточную активность
- "Выпрямите спину и согните колени" — при комплексном нарушении позы

Рекомендации выводятся в реальном времени, что позволяет пользователю сразу корректировать выполнение упражнения.